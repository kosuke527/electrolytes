<!DOCTYPE html>
<html lang="ja">
<meta charset="utf-8">
<title>é›»è§£è³ªã‚²ãƒ¼ãƒ ï¼šã‚«ãƒªã‚¦ãƒ ç·¨</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
:root { --ok:#28a745; --ng:#dc3545; --card-bg:#ffffffdd; }
body {
  margin:0; font-family:system-ui,sans-serif;
  background:linear-gradient(135deg,#89f7fe,#66a6ff);
  min-height:100vh; display:flex; justify-content:center; align-items:flex-start;
  padding:1rem;
}
h1 { margin:0 0 .5rem; font-size:1.5rem; text-align:center; }
#game {
  width:100%; max-width:650px; background:var(--card-bg); backdrop-filter:blur(6px);
  border-radius:18px; padding:1rem 1.2rem 2rem; box-shadow:0 8px 24px rgba(0,0,0,.2);
  position:relative; overflow:hidden;
}
#desc { margin:.2rem 0 1rem; font-size:.95rem; color:#333;}
#scoreBarWrapper { background:#eee; border-radius:999px; overflow:hidden; height:14px; margin:.5rem 0 1rem;}
#scoreBar {height:100%; width:0%; background:linear-gradient(90deg,#4ade80,#16a34a);}
#card {text-align:center;}
#item { font-size:1.3rem; font-weight:600; min-height:2.6rem; padding:.4rem .5rem; border-radius:6px; background:#f5f7ff; display:flex; align-items:center; justify-content:center;}
.buttons { margin-top:.7rem; }
button {
  cursor:pointer; border:none; border-radius:8px; padding:.6rem 1.1rem; font-size:1.05rem;
  margin:.2rem .3rem; font-weight:600; background:#3478f6; color:#fff; transition:.2s;
}
button:hover { filter:brightness(1.1); }
button.secondary { background:#888; }
#result { font-weight:bold; margin-top:.6rem; font-size:1.2rem; }
#result.ok { color:var(--ok); }
#result.ng { color:var(--ng); }
#explanation { margin-top:.2rem; font-size:.9rem; line-height:1.4; }
footer { margin-top:1rem; font-size:.7rem; color:#555; text-align:center;}
#scoreText { font-size:.9rem; font-weight:600; }

.screen {
  position:absolute; inset:0; display:flex; flex-direction:column; justify-content:center;
  align-items:center; gap:1rem; text-align:center; padding:1rem;
}
#startScreen { background:linear-gradient(135deg,#ffe259,#ffa751); }
#endScreen  { background:linear-gradient(135deg,#a1ffce,#faffd1); display:none; }
.screen button {background:#ff5e62;}
.confetti {
  position:absolute; width:10px; height:10px; background:var(--c);
  top:-10px; left:0; opacity:.9; border-radius:2px; animation:fall 1s linear forwards;
}
@keyframes fall { to { transform:translateY(350px) rotate(720deg); opacity:0; } }
</style>
<body>
<div id="game">
  <!-- ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ -->
  <div id="startScreen" class="screen">
    <h2>ğŸ® é›»è§£è³ªã‚²ãƒ¼ãƒ ï¼šã‚«ãƒªã‚¦ãƒ ç·¨</h2>
    <p style="max-width:320px">å…¨20å•ï¼ ç—…æ…‹/è–¬å‰¤ãŒå‡ºãŸã‚‰è¡€æ¸…ã‚«ãƒªã‚¦ãƒ ã‚’<br><b>ä¸Šã’ã‚‹</b>ã‹<b>ä¸‹ã’ã‚‹</b>ã‹ç­”ãˆã‚ˆã†ã€‚100ç‚¹æº€ç‚¹ã‚’ç›®æŒ‡ã›ï¼</p>
    <button onclick="startGame()">ã‚²ãƒ¼ãƒ é–‹å§‹ â–¶</button>
  </div>
  <!-- çµ‚äº†ç”»é¢ -->
  <div id="endScreen" class="screen">
    <h2>ğŸ çµæœ</h2>
    <p id="finalScore" style="font-size:1.2rem;font-weight:600;"></p>
    <p id="finalDetail"></p>
    <button onclick="restartGame()">ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤</button>
  </div>

  <h1>é›»è§£è³ªã‚²ãƒ¼ãƒ ï¼šã‚«ãƒªã‚¦ãƒ ç·¨</h1>
  <div id="desc">è¡¨ç¤ºã•ã‚ŒãŸ <strong>ç—…æ…‹ / è–¬å‰¤</strong> ã¯è¡€æ¸…ã‚«ãƒªã‚¦ãƒ ã‚’ã€Œä¸Šã’ã‚‹ã€ã‹ã€Œä¸‹ã’ã‚‹ã€ã‹ï¼Ÿï¼ˆ<span id="remain"></span>ï¼‰</div>
  <div id="scoreText">ã‚¹ã‚³ã‚¢: <span id="correct">0</span>/<span id="total">0</span></div>
  <div id="scoreBarWrapper"><div id="scoreBar"></div></div>

  <div id="card">
    <div id="item"></div>
    <div class="buttons">
      <button onclick="answer('up')">ğŸ”º ä¸Šã’ã‚‹</button>
      <button onclick="answer('down')">ğŸ”» ä¸‹ã’ã‚‹</button>
      <button onclick="nextQuestion()" id="nextBtn" class="secondary" style="display:none;">æ¬¡ã®å•é¡Œ â–¶</button>
    </div>
    <div id="result"></div>
    <div id="explanation"></div>
  </div>

  <footer>â€»æ•™è‚²ç”¨ã‚µãƒ³ãƒ—ãƒ«ã€‚å®Ÿè‡¨åºŠã§ã¯æ‚£è€…èƒŒæ™¯ã‚’è€ƒæ…®ã—ã¦ãã ã•ã„ã€‚</footer>
</div>

<script>
const TOTAL_QUESTIONS = 20;
const POINT_PER_Q = 5;

// å…ƒãƒ‡ãƒ¼ã‚¿
const data = [
  {name:'ACEé˜»å®³è–¬ï¼ˆã‚¨ãƒŠãƒ©ãƒ—ãƒªãƒ«ç­‰ï¼‰', effect:'up', explanation:'ã‚¢ãƒ«ãƒ‰ã‚¹ãƒ†ãƒ­ãƒ³ä½ä¸‹â†’Kæ’æ³„ä½ä¸‹ã§é«˜ã‚«ãƒªã‚¦ãƒ è¡€ç—‡ã€‚'},
  {name:'ARBï¼ˆãƒ­ã‚µãƒ«ã‚¿ãƒ³ç­‰ï¼‰', effect:'up', explanation:'ACEé˜»å®³è–¬ã¨åŒæ§˜ã«ã‚¢ãƒ«ãƒ‰ã‚¹ãƒ†ãƒ­ãƒ³ä½ä¸‹ã€‚'},
  {name:'ã‚¹ãƒ”ãƒ­ãƒãƒ©ã‚¯ãƒˆãƒ³ï¼ã‚¨ãƒ—ãƒ¬ãƒ¬ãƒãƒ³', effect:'up', explanation:'Kä¿æŒæ€§åˆ©å°¿è–¬ã§é›†åˆç®¡ã§Kæ’æ³„ã‚’æŠ‘åˆ¶ã€‚'},
  {name:'ãƒˆãƒªãƒ¡ãƒˆãƒ—ãƒªãƒ ', effect:'up', explanation:'ENaCé˜»å®³ä½œç”¨â†’Kæ’æ³„ä½ä¸‹ã€‚'},
  {name:'ã‚·ã‚¯ãƒ­ã‚¹ãƒãƒªãƒ³ / ã‚¿ã‚¯ãƒ­ãƒªãƒ ã‚¹', effect:'up', explanation:'ä½ã‚¢ãƒ«ãƒ‰ã‚¹ãƒ†ãƒ­ãƒ³ä½œç”¨ï¼‹è…æ©Ÿèƒ½ä½ä¸‹ã€‚'},
  {name:'NSAIDs', effect:'up', explanation:'è…è¡€æµãƒ»ãƒ¬ãƒ‹ãƒ³ä½ä¸‹â†’ã‚¢ãƒ«ãƒ‰ã‚¹ãƒ†ãƒ­ãƒ³ä½ä¸‹ã€‚'},
  {name:'ãƒ˜ãƒ‘ãƒªãƒ³', effect:'up', explanation:'ã‚¢ãƒ«ãƒ‰ã‚¹ãƒ†ãƒ­ãƒ³åˆæˆæŠ‘åˆ¶ã€‚'},
  {name:'ã‚¸ã‚´ã‚­ã‚·ãƒ³ä¸­æ¯’', effect:'up', explanation:'Na/K-ATPaseé˜»å®³ã§ç´°èƒå¤–Kä¸Šæ˜‡ã€‚'},
  {name:'æ¨ªç´‹ç­‹èè§£ç—‡', effect:'up', explanation:'ç´°èƒå†…Kæ”¾å‡ºã€‚'},
  {name:'ä»£è¬æ€§ã‚¢ã‚·ãƒ‰ãƒ¼ã‚·ã‚¹ï¼ˆç„¡æ©Ÿé…¸ï¼‰', effect:'up', explanation:'H/Kã‚·ãƒ•ãƒˆã«ã‚ˆã‚Šè¡€æ¸…Kä¸Šæ˜‡ã€‚'},
  {name:'è…ä¸å…¨ï¼ˆæ€¥æ€§/æœ«æœŸï¼‰', effect:'up', explanation:'Kæ’æ³„éšœå®³ã€‚'},
  {name:'å‰¯è…ä¸å…¨ï¼ˆAddisonç—…ï¼‰', effect:'up', explanation:'ã‚¢ãƒ«ãƒ‰ã‚¹ãƒ†ãƒ­ãƒ³æ¬ ä¹ã€‚'},
  {name:'ã‚¤ãƒ³ã‚¹ãƒªãƒ³æŠ•ä¸', effect:'down', explanation:'ç´°èƒå†…Kå–ã‚Šè¾¼ã¿ä¿ƒé€²ã€‚'},
  {name:'Î²2åˆºæ¿€è–¬ï¼ˆã‚µãƒ«ãƒ–ã‚¿ãƒ¢ãƒ¼ãƒ«ï¼‰', effect:'down', explanation:'Na/K-ATPaseåˆºæ¿€â†’ç´°èƒå†…ç§»è¡Œã€‚'},
  {name:'ãƒ«ãƒ¼ãƒ—åˆ©å°¿è–¬ï¼ˆãƒ•ãƒ­ã‚»ãƒŸãƒ‰ï¼‰', effect:'down', explanation:'å°¿ç´°ç®¡ã§Kæ’æ³„å¢—åŠ ã€‚'},
  {name:'ã‚µã‚¤ã‚¢ã‚¶ã‚¤ãƒ‰ç³»åˆ©å°¿è–¬', effect:'down', explanation:'é ä½å°¿ç´°ç®¡ã§Kæ’æ³„å¢—åŠ ã€‚'},
  {name:'ã‚¢ãƒ ãƒ›ãƒ†ãƒªã‚·ãƒ³B', effect:'down', explanation:'å°¿ç´°ç®¡éšœå®³â†’Kå–ªå¤±ã€‚'},
  {name:'ä¸‹ç—¢', effect:'down', explanation:'è…¸ç®¡ã‹ã‚‰Kå–ªå¤±ã€‚'},
  {name:'å˜”åï¼ˆæŒç¶šï¼‰', effect:'down', explanation:'ã‚¢ãƒ«ã‚«ãƒ­ãƒ¼ã‚·ã‚¹ï¼‹äºŒæ¬¡æ€§ã‚¢ãƒ«ãƒ‰ã‚¹ãƒ†ãƒ­ãƒ³å¢—åŠ ã§Kæ’æ³„â†‘ã€‚'},
  {name:'åŸç™ºæ€§ã‚¢ãƒ«ãƒ‰ã‚¹ãƒ†ãƒ­ãƒ³ç—‡', effect:'down', explanation:'ã‚¢ãƒ«ãƒ‰ã‚¹ãƒ†ãƒ­ãƒ³éå‰°â†’Kæ’æ³„å¢—åŠ ã€‚'},
  {name:'ä»£è¬æ€§ã‚¢ãƒ«ã‚«ãƒ­ãƒ¼ã‚·ã‚¹', effect:'down', explanation:'H/Kã‚·ãƒ•ãƒˆã§è¡€æ¸…Kä½ä¸‹ã€‚'}
];

let questionList = [];  // é‡è¤‡ãªã—å‡ºé¡Œç”¨
let nextIndex = 0;
let current = null;
let answered = false;
let correct = 0, total = 0;

// Fisher-Yatesã‚·ãƒ£ãƒƒãƒ•ãƒ«
function shuffle(arr){
  const a=[...arr];
  for(let i=a.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
}

function startGame(){
  document.getElementById('startScreen').style.display='none';
  // ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ã¦20å•åˆ†ã ã‘å–å¾—ï¼ˆãƒ‡ãƒ¼ã‚¿æ•°ãŒå°‘ãªã‘ã‚Œã°å…¨ä»¶ï¼‰
  questionList = shuffle(data);
  if(questionList.length > TOTAL_QUESTIONS){
    questionList = questionList.slice(0, TOTAL_QUESTIONS);
  }
  nextIndex = 0;
  updateRemain();
  nextQuestion();
}

function restartGame(){
  correct=0; total=0;
  document.getElementById('correct').textContent=0;
  document.getElementById('total').textContent=0;
  document.getElementById('scoreBar').style.width='0%';
  document.getElementById('endScreen').style.display='none';
  document.getElementById('startScreen').style.display='flex';
}

function updateRemain(){
  const remain = TOTAL_QUESTIONS - total;
  document.getElementById('remain').textContent = `æ®‹ã‚Š ${remain} å•`;
}

function nextQuestion(){
  if(total >= TOTAL_QUESTIONS){
    endGame();
    return;
  }
  answered=false;
  current = questionList[nextIndex]; // é †ç•ªã«
  nextIndex++;
  document.getElementById('item').textContent=current.name;
  document.getElementById('result').textContent='';
  document.getElementById('result').className='';
  document.getElementById('explanation').textContent='';
  document.getElementById('nextBtn').style.display='none';
  updateRemain();
}

function answer(choice){
  if(answered || total >= TOTAL_QUESTIONS) return;
  answered=true;
  total++;
  const ok = (choice===current.effect);
  if(ok){ correct++; celebrate(); }
  const resultEl=document.getElementById('result');
  resultEl.textContent = ok?'ğŸ‰ æ­£è§£ï¼':'âŒ ä¸æ­£è§£';
  resultEl.className = ok?'ok':'ng';
  document.getElementById('explanation').textContent='ã€è§£èª¬ã€‘'+current.explanation;
  document.getElementById('correct').textContent=correct;
  document.getElementById('total').textContent=total;
  const rate = total? (correct/total*100):0;
  document.getElementById('scoreBar').style.width = rate+'%';
  document.getElementById('nextBtn').style.display='inline-block';
  if(total === TOTAL_QUESTIONS){
    document.getElementById('nextBtn').textContent='çµæœã‚’è¦‹ã‚‹ â–¶';
  } else {
    document.getElementById('nextBtn').textContent='æ¬¡ã®å•é¡Œ â–¶';
  }
}

function endGame(){
  const score = correct * POINT_PER_Q;
  document.getElementById('finalScore').textContent = `ã‚ãªãŸã®å¾—ç‚¹ï¼š${score} ç‚¹ / 100ç‚¹`;
  document.getElementById('finalDetail').textContent = `æ­£è§£æ•° ${correct} / ${TOTAL_QUESTIONS}ï¼ˆæ­£ç­”ç‡ ${(correct/TOTAL_QUESTIONS*100).toFixed(1)}%ï¼‰`;
  document.getElementById('endScreen').style.display='flex';
}

function celebrate(){
  for(let i=0;i<20;i++){
    const span=document.createElement('span');
    span.className='confetti';
    span.style.left=Math.random()*100+'%';
    span.style.setProperty('--c', randomColor());
    span.style.animationDelay=(Math.random()*0.2)+'s';
    span.style.transform=`rotate(${Math.random()*360}deg)`;
    document.getElementById('game').appendChild(span);
    setTimeout(()=>span.remove(),1200);
  }
}
function randomColor(){
  const colors=['#ff5e62','#ffd54f','#4ade80','#60a5fa','#a78bfa','#fb7185'];
  return colors[Math.floor(Math.random()*colors.length)];
}
</script>
</body>
</html>
